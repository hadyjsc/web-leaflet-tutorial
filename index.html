<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Leaflet.JS Tutorial</title>

    <!-- Custom fonts for this template-->
    <link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
    <link
        href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i"
        rel="stylesheet">

    <!-- Custom styles for this template-->
    <link href="css/sb-admin-2.min.css" rel="stylesheet">
    <link href="css/leaflet.css" rel="stylesheet"/>
    <script src="vendor/leaflet/leaflet.js" ></script>

<style>
    .popup-style .leaflet-popup-tip,
    .popup-style .leaflet-popup-content-wrapper {
        background: #5ad0f1;
        color: #ffffff;
    }
    .popup-style .leaflet-popup-content {
        border: 5px solid #0b89b2;
        padding: 10px;
        border-radius: 10px;
    }

    .popup-style a.leaflet-popup-close-button {
        position: absolute;
        top: -15px;
        right: -10px;
        text-align: center;
        width: 32px;
        padding-top: 3px;
        height: 32px;
        color: #ffffff;
        background-color: #fd6464;
        text-decoration: none;
        border-radius: 50%;
    }

    .popup-style a.leaflet-popup-close-button:hover, a.leaflet-popup-close-button:focus {
        color: #ffffff;
        transform: scale(1.2);
    }
</style>
    
</head>

<body id="page-top">

    <!-- Page Wrapper -->
    <div id="wrapper">

        <!-- Sidebar -->
        <ul class="navbar-nav bg-gradient-primary sidebar sidebar-dark accordion" id="accordionSidebar">

            <!-- Sidebar - Brand -->
            <a class="sidebar-brand d-flex align-items-center justify-content-center" href="index.html">
                <div class="sidebar-brand-text mx-3">Java-SC</div>
            </a>

            <!-- Divider -->
            <hr class="sidebar-divider my-0">

            <!-- Nav Item - Dashboard -->
            <li class="nav-item active">
                <a class="nav-link" href="index.html">
                    <i class="fas fa-fw fa-tachometer-alt"></i>
                    <span>Dashboard</span></a>
            </li>

            <li class="nav-item">
                <a class="nav-link" href="#">
                    <i class="fas fa-fw fa-globe"></i>
                    <span>Amazon</span></a>
            </li>

            <li class="nav-item">
                <a class="nav-link" href="#">
                    <i class="fas fa-fw fa-university"></i>
                    <span>Facebook</span></a>
            </li>

            <!-- Sidebar Toggler (Sidebar) -->
            <div class="text-center d-none d-md-inline">
                <button class="rounded-circle border-0" id="sidebarToggle"></button>
            </div>

        </ul>
        <!-- End of Sidebar -->

        <!-- Content Wrapper -->
        <div id="content-wrapper" class="d-flex flex-column">

            <!-- Main Content -->
            <div id="content">

                <!-- Topbar -->
                <nav class="navbar navbar-expand navbar-light bg-white topbar mb-4 static-top shadow">

                    <!-- Sidebar Toggle (Topbar) -->
                    <button id="sidebarToggleTop" class="btn btn-link d-md-none rounded-circle mr-3">
                        <i class="fa fa-bars"></i>
                    </button>

                    <!-- Topbar Navbar -->
                    <ul class="navbar-nav ml-auto">

                        <div class="topbar-divider d-none d-sm-block"></div>

                        <!-- Nav Item - User Information -->
                        <li class="nav-item dropdown no-arrow">
                            <a class="nav-link dropdown-toggle" href="#" id="userDropdown" role="button"
                                data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <span class="mr-2 d-none d-lg-inline text-gray-600 small">Douglas McGee</span>
                                <img class="img-profile rounded-circle"
                                    src="img/undraw_profile.svg">
                            </a>
                            <!-- Dropdown - User Information -->
                            <div class="dropdown-menu dropdown-menu-right shadow animated--grow-in"
                                aria-labelledby="userDropdown">
                                <a class="dropdown-item" href="#">
                                    <i class="fas fa-user fa-sm fa-fw mr-2 text-gray-400"></i>
                                    Profile
                                </a>
                                <a class="dropdown-item" href="#">
                                    <i class="fas fa-cogs fa-sm fa-fw mr-2 text-gray-400"></i>
                                    Settings
                                </a>
                                <a class="dropdown-item" href="#">
                                    <i class="fas fa-list fa-sm fa-fw mr-2 text-gray-400"></i>
                                    Activity Log
                                </a>
                                <div class="dropdown-divider"></div>
                                <a class="dropdown-item" href="#" data-toggle="modal" data-target="#logoutModal">
                                    <i class="fas fa-sign-out-alt fa-sm fa-fw mr-2 text-gray-400"></i>
                                    Logout
                                </a>
                            </div>
                        </li>

                    </ul>

                </nav>
                <!-- End of Topbar -->

                <!-- Begin Page Content -->
                <div class="container-fluid">

                    <!-- Page Heading -->
                    <div class="d-sm-flex align-items-center justify-content-between mb-4">
                        <h1 class="h3 mb-0 text-gray-800">Dashboard</h1>
                        <a href="#" class="d-none d-sm-inline-block btn btn-sm btn-primary shadow-sm"><i
                                class="fas fa-download fa-sm text-white-50"></i> Button Sample</a>
                    </div>

                    <!-- Content Row -->

                    <div class="row">

                        <!-- Area Chart -->
                        <div class="col-xl-12 col-lg-10">
                            <div class="card shadow mb-4">
                                <!-- Card Header - Dropdown -->
                                <div
                                    class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                                    <h6 class="m-0 font-weight-bold text-primary">Maps</h6>
                                </div>
                                <!-- Card Body -->
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-xl-12 mb-2">
                                            <div class="row">
                                                <div class="col">
                                                    <input type="text" class="form-control" id="lat" placeholder="Latitude" aria-label="Latitude">
                                                </div>
                                                <div class="col">
                                                    <input type="text" class="form-control" id="lng" placeholder="Longitude" aria-label="Longitude">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-xl-12">
                                            <div class="map" id="map" style="height: 500px;">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
                <!-- /.container-fluid -->

            </div>
            <!-- End of Main Content -->

            <!-- Footer -->
            <footer class="sticky-footer bg-white">
                <div class="container my-auto">
                    <div class="copyright text-center my-auto">
                        <span>Copyright &copy; Java-SC 2022</span>
                    </div>
                </div>
            </footer>
            <!-- End of Footer -->

        </div>
        <!-- End of Content Wrapper -->

    </div>
    <!-- End of Page Wrapper -->

    <!-- Scroll to Top Button-->
    <a class="scroll-to-top rounded" href="#page-top">
        <i class="fas fa-angle-up"></i>
    </a>

    <!-- Bootstrap core JavaScript-->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!-- Core plugin JavaScript-->
    <script src="vendor/jquery-easing/jquery.easing.min.js"></script>

    <!-- Custom scripts for all pages-->
    <script src="js/sb-admin-2.min.js"></script>

    <!-- Page level plugins -->
    <script src="vendor/chart.js/Chart.min.js"></script>

    <!-- Page level custom scripts -->
    <script src="js/demo/chart-area-demo.js"></script>
    <script src="js/demo/chart-pie-demo.js"></script>

<script>
var coordinate = [0.4663414, 101.4321967];
var map = L.map('map').setView(coordinate, 13);

var tiles = L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 19,
    attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
}).addTo(map);

var marker = L.marker(coordinate, {
        draggable: true,
        autoPan: true,
        autoPanPadding: L.point(300, 300),
        autoPanSpeed: 5
    }).addTo(map)
    .bindPopup('<b>Hello Team!</b><br /> Saya sekarang ada di pekanbaru.').openPopup();

let contentA = `Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Facilisis sed odio morbi quis. Consequat mauris nunc congue nisi vitae suscipit tellus mauris. Scelerisque purus semper eget duis at tellus at urna. Sed vulputate mi sit amet mauris commodo quis imperdiet. Sollicitudin nibh sit amet commodo nulla facilisi nullam. Tempor orci eu lobortis elementum nibh tellus molestie. Pretium nibh ipsum consequat nisl vel pretium. Pulvinar mattis nunc sed blandit. Orci eu lobortis elementum nibh tellus. Elit pellentesque habitant morbi tristique senectus et netus et. Morbi non arcu risus quis varius quam quisque. Id nibh tortor id aliquet. Donec et odio pellentesque diam.`
let contentB = `<p><h1>Tag HTML Sederhana</h1></br>${contentA}</p>`
let contentC = `
<style>
table.Harga{width:100%;background-color:#fff;border-collapse:collapse;border:2px solid #fc0;color:#000}table.Harga td,table.Harga th{border:2px solid #fc0;padding:3px}table.Harga thead{background-color:#fc0}
</style>
<table class="Harga">
  <thead>
    <tr>
      <th>Menu</th>
      <th>Harga (Rupiah)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Semur Jengkol</td>
      <td>20.000</td>
    </tr>
    <tr>
      <td>Ayam Penyet</td>
      <td>15.000</td>
    </tr>
    <tr>
      <td>Ikan Asin</td>
      <td>25.000</td>
    </tr>
  </tbody>
</table>`
let contentD =`
<h1>Hi, kita belajar popup....</h1>
<p><em><strong>Lorem ipsum dolor sit amet, consectetur adipiscing elit.&nbsp;</strong></em></p>
<ul>
	<li>Sed do eiusmod tempor incididunt<strong> </strong></li>
	<li>ut labore et dolore magna aliqua.</li>
</ul>
<p><em><strong>Facilisis sed odio morbi quis.</strong></em></p>
<ol>
	<li>Consequat mauris nunc congue nisi vitae suscipit tellus mauris.</li>
	<li>Scelerisque purus semper eget duis at tellus at urna.</li>
</ol>
<p>Sed vulputate mi sit amet mauris commodo quis imperdiet. Sollicitudin nibh sit amet commodo nulla facilisi nullam. Tempor orci eu lobortis elementum nibh tellus molestie. Pretium nibh ipsum consequat nisl vel pretium.</p>
<p><img alt="" src="https://via.placeholder.com/150" style="width: 150px; height: 150px; float: left; padding-right:10px;" />Pulvinar mattis nunc sed blandit. Orci eu lobortis elementum nibh tellus. Elit pellentesque habitant morbi tristique senectus et netus et. Morbi non arcu risus quis varius quam quisque. Id nibh tortor id aliquet. Donec et odio pellentesque diam. Pulvinar mattis nunc sed blandit. Orci eu lobortis elementum nibh tellus. Elit pellentesque habitant morbi tristique senectus et netus et. Morbi non arcu risus quis varius quam quisque. Id nibh tortor id aliquet. Donec et odio pellentesque diam. Pulvinar mattis nunc sed blandit. Orci eu lobortis elementum nibh tellus. Elit pellentesque habitant morbi tristique senectus et netus et. Morbi non arcu risus quis varius quam quisque. Id nibh tortor id aliquet. Donec et odio pellentesque diam.</p>
<p>
<style type="text/css">
    table.GeneratedTable{width:100%;background-color:#fff;border-collapse:collapse;border:2px solid #249be5;color:#000}table.GeneratedTable td,table.GeneratedTable th{border:2px solid #249be5;padding:3px}table.GeneratedTable thead{background-color:#1fb4f4}
</style>
<p>&nbsp;</p>
<p>Morbi non arcu risus quis varius quam quisque. Id nibh tortor id aliquet. Donec et odio pellentesque diam.</p>
<table class="GeneratedTable">
	<thead>
		<tr>
			<th>Menu</th>
			<th>Harga (Rupiah)</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>Ayam Bumbu</td>
			<td>10.000</td>
		</tr>
		<tr>
			<td>Ayam Bakar</td>
			<td>15.000</td>
		</tr>
		<tr>
			<td>Ikan Goreng</td>
			<td>8.000</td>
		</tr>
	</tbody>
</table>
`

let markers = [
    ["Lokasi A", 0.4416628383148069, 101.45475001020412, "img/bus-stop.png", contentA], 
    ["Lokasi B", 0.4748099340179762, 101.41342163085938, "img/bus-stop.png", contentB],
    ["Lokasi C", 0.47551720065056363, 101.3901757997987, "img/restaurant.png", contentC],
    ["Lokasi D", 0.4870569148014377, 101.3901757997987, "img/restaurant.png", contentD]
]
let markerLain;
let icon;
let customPopup;
for (const item of markers) {
    icon = L.icon({
        iconUrl: item[3],
        iconSize: [38, 38]
    });
    
    customPopup = L.popup({
        offset: L.point(0, -10),
        minWidth: 600,
        maxHeight: 400,
    })
    .setContent(item[4])

    var customOptions = {
        'className' : 'popup-style'
    }

    markerLain = new L.marker([item[1], item[2]], { icon })
        .bindPopup(customPopup, customOptions)
        .openPopup();

    
    map.addLayer(markerLain)
    removeMarker(markerLain)
}

// Custom Popup pada marker
let coordinatePopup = [0.4773176589044551, 101.45908355712892]

let popup = L.popup({
        offset: L.point(0, -10),
        maxWidth: 40,
        minWidth: 10,
        maxHeight: 100,
        closeButton: false,
    })
    .setLatLng(coordinatePopup)
    .setContent('Belajar Popup Sederhana')

let markerPopup = new L.Marker(coordinatePopup, { icon: L.icon({
        iconUrl: "img/restaurant.png",
        iconSize: [38, 38]
    }) 
}).addTo(map).bindPopup(popup)

function removeMarker(marker) {
    marker.on('dblclick', (e)=> {
        e.target.remove()
    })
}

map.on('click', (e) => {
    let coordinate = e.latlng
    markerLain = new L.marker(coordinate)
        .addTo(map)
        .bindPopup('<b>Hello Team!</b><br /> Saat ini saya ada dikoordinat '+coordinate+'.')
        .openPopup();
})

marker.on('click',(e) => {
    console.log(e)
    showData(e)
})



marker.on('dblclick', (e) => {
    console.log("Ini ditekan karena double click", e);
})

const deleteMarker = (e) => {
    if (deleteBool) {
        e.target.removeFrom(map)
        deleteBooly = false
    }
}

marker.on('mouseover', (e) => {
    console.log("Marker disentuh oleh cursor");
})

marker.on('mouseout', (e) => {
    console.log("Cursor keluar dari marker");
})

marker.on("drag", (e) => {
    let latlng = e.latlng
    $("#lat").val(latlng.lat)
    $("#lng").val(latlng.lng)
})

function showData(data) {
    console.log("LatLng", data.latlng)
    console.log("LayerPoint", data.layerPoint);
}
</script>
</body>

</html>